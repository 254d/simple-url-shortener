<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <title>Insert title here</title>
  <style>
    .input_size {
      width: 500px;
    }
  </style>
</head>

<body>

  <div id="app">
    <h1>URL Shortener</h1>
    <p>URL:</p>
    <p>
      <input class="input_size" type="url" v-model="url">
      <button v-on:click="add">Submit</button>
    </p>
    <p>Result:</p>
    <p>
      <input class="input_size" type="url" v-model="result" readonly>
    </p>
    <p>Original:</p>
    <p>{{ originalUrl }}</p>
  </div>

  <script src="https://unpkg.com/vue@next"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.27.2/axios.min.js"></script>
  <script>
    const API_URL = location.href + "api/"
    const WEB_SERVICE_URL = location.href
    console.log(API_URL);
    console.log(WEB_SERVICE_URL);
    const app = Vue.createApp({
      data: () => ({
        url: "",
        response: [],
        result: "",
        originalUrl: ""
      }),
      methods: {
        add: function () {
          axios.post(API_URL, {
            originalUrl: this.url
          })
            .then(response => {
              console.log(response.data);
              this.response = response;
              this.result = WEB_SERVICE_URL + response.data.id;
            })
          this.originalUrl = this.url
          this.url = ""
        }
      }
    })
    app.mount('#app');
  </script>
</body>

</html>